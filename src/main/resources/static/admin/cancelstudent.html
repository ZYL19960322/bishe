<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>2019@ZYL.BS</title>
    <meta charset="utf-8"/>
    <meta http-equiv='X-UA-Compatible' content="IE=edge,IE=9,IE=8,chrome=1"/>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"/>
    <link rel="stylesheet" href="admin/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="admin/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="admin/css/styles.css"/>
    <link rel="stylesheet" href="admin/css/styles-responsive.css"/>
    <link rel="stylesheet" href="admin/css/plugins.css"/>
    <link rel="stylesheet" href="admin/css/perfect-scrollbar.css"/>
    <link rel="stylesheet" href="admin/css/theme-default.css" type="text/css" id="skin_color"/>
    <link rel="stylesheet" href="admin/css/print.css" type="text/css" media="print"/>
    <link rel="shortcut icon" href="favicon.ico"/>
</head>
<body>
<!-- start: SLIDING BAR (SB) -->
<div class="main-wrapper">
    <!-- start: TOPBAR -->
    <header class="topbar navbar navbar-inverse navbar-fixed-top inner">
        <!-- start: TOPBAR CONTAINER -->
        <div class="container">
            <div class="navbar-header">
                <a class="sb-toggle-left hidden-md hidden-lg" href="#main-navbar">
                    <i class="fa fa-bars"></i>
                </a>
                <a class="navbar-brand" href="index.html">
                    <img src="admin/images/logo.png" alt="Rapido"/>
                </a>
            </div>
        </div>
    </header>
    <div class="main-container inner">
        <!-- start: PAGE -->
        <div class="main-content">
            <div class="container" style="position: relative">
                <nav id="pageslide-left" class="pageslide inner">
                    <div class="navbar-content">
                        <!-- start: SIDEBAR -->
                        <div class="main-navigation left-wrapper transition-left">
                            <div class="user-profile border-top padding-horizontal-10 block">
                                <div class="inline-block">
                                    <img src="admin/images/avatar-1.jpg" style="width: 50px;height: 50px"/>
                                </div>
                                <div class="inline-block">
                                    <h5 class="no-margin">欢迎您来到</h5>
                                    <h4 class="no-margin">报名管理系统</h4>
                                </div>
                            </div>
                            <!-- start: MAIN NAVIGATION MENU -->
                            <ul class="main-navigation-menu">
                                <li>
                                    <a href="toAdminIndexPage"><i class="fa fa-home"></i> <span
                                            class="title">系统首页</span> </a>
                                </li>
                                <li class="active open">
                                    <a href="javascript:void(0)"><i class="fa fa-th-large"></i> <span class="title"> 学生管理 </span><i
                                            class="icon-arrow"></i> </a>
                                    <ul class="sub-menu">
                                        <li>
                                            <a href="adStudentInfo">
                                                <span class="title">学生信息</span>
                                            </a>
                                        </li>
                                        <li class="active">
                                            <a href="cancelStudent">
                                                <span class="title">注销学生</span>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="javascript:void(0)"><i class="fa fa-pencil-square-o"></i> <span
                                            class="title">活动管理</span><i class="icon-arrow"></i> </a>
                                    <ul class="sub-menu">
                                        <li>
                                            <a href="selectActivityListByStatusId?statusId=2">
                                                <span class="title">活动报名中</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="selectActivityListByStatusId?statusId=3">
                                                <span class="title">活动筹办中</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="selectActivityListByStatusId?statusId=4">
                                                <span class="title">活动举办中</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="selectActivityListByStatusId?statusId=5">
                                                <span class="title">活动已结束</span>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="javascript:void(0)"><i class="fa fa-cubes"></i> <span
                                            class="title">消息管理</span><i class="icon-arrow"></i> </a>
                                    <ul class="sub-menu">
                                        <li>
                                            <a href="selectCheckingActivityByAdminId">
                                                <span class="title">新审核消息</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="selectCheckAgainActivityByAdminId">
                                                <span class="title">再审核消息</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="selectAllRemindMessage">
                                                <span class="title">提醒型消息</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="selectUndealMessageByAdminId">
                                                <span class="title">未处理消息</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="selectFinishedMessageByAdminId">
                                                <span class="title">已完成消息</span>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="slide-tools">
                        <div class="col-xs-6 text-left no-padding">
                        </div>
                        <div class="col-xs-6 text-right no-padding">
                            <a class="btn btn-sm log-out text-right" href="adminLoginOut">
                                <i class="fa fa-power-off"></i> Log Out
                            </a>
                        </div>
                    </div>
                </nav>
                <div class="toolbar row">
                    <div class="col-sm-6 hidden-xs">
                        <div class="page-header" style="margin-top: 10px;margin-bottom: 5px">
                            <h2>注销的学生</h2>
                        </div>
                    </div>
                </div>
                <div class="row" style="margin-top: 12px">
                    <div class="col-md-12" style="padding-right: 10px;padding-left: 5px">
                        <!-- start: EXPORT DATA TABLE PANEL  -->
                        <div class="panel panel-white">
                            <div class="panel-body">
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover" id="sample-table-2">
                                        <thead>
                                        <tr class="row">
                                            <th class=" col-md-2">班级</th>
                                            <th class="col-md-2">报名姓名</th>

                                            <th class="col-md-2">学号</th>

                                            <th class="col-md-2">电话</th>
                                            <th class=" col-md-1">用户名</th>
                                            <th class=" col-md-2">最近登录时间</th>
                                            <th class="col-md-1">操作</th>
                                        </tr>
                                        </thead>
                                        <tbody id="studentInfo" name="studentInfo">
                                        <tr class="row" th:each="student:${pageInfo.list}">
                                            <td class="col-md-2"
                                                th:text="${student.studentClassInfo.studGradeName}+${student.studentClassInfo.studClassName}"></td>
                                            <td class="col-md-2" th:text="${student.studEnrollName}">钟玉林</td>

                                            <td class="col-md-2" th:text="${student.studNumber}">jerry</td>

                                            <td class="col-md-2" th:text="${student.studPhone}">
                                                13794587900
                                            </td>
                                            <td class="col-md-1" th:text="${student.studName}">jerry</td>
                                            <td class="col-md-2" th:text="${student.studLoginTime}">2019-02-14 15:30
                                            </td>
                                            <td class="col-md-1">
                                                <div class="visible-md visible-lg hidden-sm hidden-xs">
                                                    <label href="#" onclick="deleteStudentByStudId(this)"
                                                           th:id="${student.studId}" th:value="${student.studId}"
                                                           class="btn btn-xs btn-red tooltips" data-placement="top"
                                                           data-original-title="Delete"><i
                                                            class="fa fa-times fa fa-white"></i></label>
                                                </div>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="row" id="page" name="page">
                                    <div class="col-md-4">
                                        <ul class="pagination pagination-green margin-bottom-10">
                                            <li th:id="${pageInfo.prePage}" onclick="pageShow(this)"
                                                th:value="${pageInfo.prePage}">
                                                <a href="#"><i class="fa fa-chevron-left"></i></a>
                                            </li>
                                        </ul>
                                        <ul class="pagination pagination-green margin-bottom-10"
                                            th:each="pageNum:${pageInfo.navigatepageNums}">
                                            <li th:id="${pageNum}" th:class="${pageNum == pageInfo.pageNum}? 'active'"
                                                th:value="${pageNum}" onclick="pageShow(this)">
                                                <a href="#" th:text="${pageNum}">
                                                </a>
                                            </li>
                                        </ul>
                                        <ul class="pagination pagination-green margin-bottom-10">
                                            <li th:id="${pageInfo.nextPage}" onclick="pageShow(this)"
                                                th:value="${pageInfo.nextPage}">
                                                <a href="#"><i class="fa fa-chevron-right"></i></a>
                                            </li>
                                        </ul>
                                    </div>
                                    <div id="show_page_info" class="col-md-4 col-md-offset-1">
                                        <span th:text="'当前第'+${pageInfo.pageNum}+'页'"></span>
                                        <span th:text="'总共'+${pageInfo.pages}+'页'"></span>
                                        <span th:text="'总共'+${pageInfo.total}+'条记录'"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="inner">
        <div class="footer-inner">
            <div class="pull-left">
                2019 @ ZYL.BS
            </div>
        </div>
    </footer>
</div>
<script type="text/javascript" src="admin/js/jquery-1.11.1.min.js"></script>
<script src="admin/js/jquery-2.1.1.min.js"></script>
<script src="admin/js/jquery-ui-1.10.2.custom.min.js"></script>
<script src="admin/js/bootstrap.min.js"></script>
<!--有用的-->
<script src="admin/js/perfect-scrollbar.js"></script>
<script src="admin/js/jquery.scrollTo.min.js"></script>
<script src="admin/js/main.js"></script>
<script src="admin/js/index.js"></script>
<script src="layer/layer.js"></script>
<script>
    jQuery(document).ready(function () {
        Main.init();
        SVExamples.init();
        TableExport.init();
    });
</script>
<script>
    function deleteStudentByStudId(a) {
        var studId = a.id;
        $.ajax(
            {
                url: "/selectStudentDetailBystudId",
                type: 'POST',
                data: {studId: studId},
                cache: false,
                async: false,
                dataType: 'json',
                success: function (data) {
                    layer.open({
                        title: '学生的活动情况如下,确定删除吗？'
                        , content: data.statusDesc
                        , btn: ['确定删除', '取消删除']
                        , yes: function (index) {
                            $.ajax({
                                url: "/deleteStudentByStudId",
                                type: 'POST',
                                data: {studId: studId},
                                cache: false,
                                async: false,
                                dataType: 'json',
                                success: function (result) {
                                    if (result == true) {
                                        layer.msg('删除学生成功', {icon: 1, time: 3000});
                                        window.location.reload();
                                    }
                                    if (result == false) {
                                        layer.msg('删除学生失败');
                                    }
                                },
                                error: function () {
                                    layer.msg('删除学生出错');
                                }
                            });
                            layer.close(index);
                        }
                    })


                },
            }
        )
    }

</script>

<script>
    function pageShow(a) {
        var pageNum = a.value;
        var pageId = a.id;//获取当前标签的id值
        $.ajax(
            {
                url: "/pageShowCancelStudent",
                type: 'POST',
                data: {pageNum: pageNum},
                cache: false,
                async: false,
                dataType: 'json',
                success: function (pageInfo) {
                    var html = '';
                    var html1 = '';
                    $("#studentInfo").empty();
                    $.each(pageInfo.list, function (index) {
                        html += '<tr class="row"  id="studentInfo" name="studentInfo" >' +
                            '<td class="col-md-2" value="' + pageInfo.list[index].studentClassInfo.studGradeName + pageInfo.list[index].studentClassInfo.studClassName + '">' + pageInfo.list[index].studentClassInfo.studGradeName + pageInfo.list[index].studentClassInfo.studClassName + '</td>' +
                            '<td class="col-md-2" >' + pageInfo.list[index].studEnrollName + '</td>' +
                            '<td class="col-md-2" value="' + pageInfo.list[index].studNumber + '">' + pageInfo.list[index].studNumber + '</td>' +
                            '<td class="col-md-2" value="' + pageInfo.list[index].studPhone + '">' + pageInfo.list[index].studPhone + '</td>' +
                            '<td class="col-md-1" value="' + pageInfo.list[index].studName + '">' + pageInfo.list[index].studName + '</td>' +
                            '<td class="col-md-2" value="' + pageInfo.list[index].studLoginTime + '">' + pageInfo.list[index].studLoginTime + '</td>' +
                            '<td class="col-md-1">' +
                            '<div class="visible-md visible-lg hidden-sm hidden-xs">' +
                            '<a href="#" class="btn btn-xs btn-red tooltips"   onclick="deleteStudentByStudId(this)"   id="' + pageInfo.list[index].studId + '" value="' + pageInfo.list[index].studId + '"  data-placement="top" data-original-title="Delete">' + '<i class="fa fa-times fa fa-white">' + '</i>' + '</a>' +
                            '</div>' +
                            '</td>' +
                            '</tr>'
                    })
                    $("#studentInfo").html(html);


                    //拼接分页的页码和数据，将id设置为当前的value值，目的是为了根据id将其页码标签的class设置active;每个标签的onclick都为同一个方法，目的是精简高效使用代码
                    $("#page").empty();
                    html1 += '<div class="row"  name="page">' +
                        '<div id="show_page_nav" class="col-md-4" style="margin-left: 15px">' +
                        '<ul  class="pagination pagination-green margin-bottom-10">' +
                        '<li   id="' + pageInfo.prePage + '" onclick="pageShow(this)" value="' + pageInfo.prePage + '">' +
                        '<a   style="margin-right: 4px"  href="#"><i class="fa fa-chevron-left">' + '</i>' + '</a>' + '</li>' +
                        '</ul>'

                    $.each(pageInfo.navigatepageNums, function (index) {
                        html1 += '<ul  class="pagination pagination-green margin-bottom-10" >' +
                            '<li id="' + pageInfo.navigatepageNums[index] + '" value="' + pageInfo.navigatepageNums[index] + '"  text="' + pageInfo.navigatepageNums[index] + '" onclick="pageShow(this)">' +
                            '<a href="#"  value="' + pageInfo.navigatepageNums[index] + '" style="margin-right: 4px"> ' + pageInfo.navigatepageNums[index] + '</a>' +
                            '</li>' +
                            '</ul>'
                    }),

                        html1 += '<ul  class="pagination pagination-green margin-bottom-10">' +
                            '<li id="' + pageInfo.nextPage + '" onclick="pageShow(this)" value="' + pageInfo.nextPage + '" >' +
                            '<a href="#"><i class="fa fa-chevron-right">' + '</i>' + '</a>' +
                            '</li>' +
                            '</ul>' +
                            '</div>' +
                            '<div id="show_page_info" class="col-md-4 col-md-offset-1">' +
                            '<span>当前第' + pageInfo.pageNum + '页</span>' +
                            '<span>总共' + pageInfo.pages + '页</span>' +
                            '<span>总共' + pageInfo.total + '条记录</span>' +
                            '</div>' +
                            '</div>'
                    $("#page").html(html1);
                    //当到了最后一页时，如果点击下一页，页码pageNum会为0,但实际情况是pageHelper插件会当到了最后一页时，再点击下一页，会显示第一页的数据
                    if (pageId != 0) {
                        document.getElementById(pageId).className = "active"
                    } else {
                        document.getElementById(1).className = "active"
                    }
                },
            }
        );
    }
</script>
</body>
</html>